#include "Biome.hpp"
#include "Layer.hpp"
#include "Generator.hpp"

int biome_colors[256 * 3] = {
	  0,  0,112,141,179, 96,250,148, 24, 96, 96, 96,  5,102, 33, 11,102, 89,  7,249,178,  0,  0,255,
	255,  0,  0,128,128,255,144,144,160,160,160,255,255,255,255,160,160,160,255,  0,255,160,  0,255,
	250,222, 85,210, 95, 18, 34, 85, 28, 22, 57, 51,114,120,154, 83,123,  9, 44, 66,  5, 98,139, 23,
	  0,  0, 48,162,162,132,250,240,192, 48,116, 68, 31, 95, 50, 64, 81, 26, 49, 85, 74, 36, 63, 54,
	 89,102, 81, 69, 79, 62, 80,112, 80,189,178, 95,167,157,100,217, 69, 21,176,151,101,202,140,101,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,  0,  0,112,  0,  0,112,  0,  0,112,  0,  0,112,
	  0,  0,112,  0,  0,112,  0,  0,112,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	 40, 40,152,181,219,136,255,188, 64,136,136,136, 45,142, 73, 51,142,129, 47,255,218, 40, 40,255,
	255, 40, 40,168,168,255,184,184,200,200,200,255,180,220,220,200,200,200,255, 40,255,200, 40,255,
	255,255,125,250,135, 58, 74,125, 68, 62, 97, 91,154,160,194,123,163, 49, 84,106, 45,138,179, 63,
	 40, 40, 88,202,202,172,255,255,232, 88,156,108, 71,135, 90,104,121, 66, 89,125,114, 76,103, 94,
	129,142,121,109,119,102,120,152,120,229,218,135,207,197,140,255,109, 61,216,191,141,242,180,141,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,
	255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255,255,  0,255
};

int* mod_out = NULL;
int dx = 32;
int dy = 32;
int vx = 32;
int vy = 32;
int lyr;

void modern() {
	Biome::initBiomes();
	Generator gen;
	gen.init(Generator::Version::MC_1_14);
	gen.applySeed(71);
	Layer* top = &(gen.layers[lyr]);
	Layer* cur = top;
	/*     printf("----\n");
		int i = 0;
		while (cur != NULL) {
			printf("%i %p\n", i, cur->parent);
			cur = cur->parent;
			i++;
		} */
	mod_out = top->allocCache(dx, dy);
	top->genArea(mod_out, -(dx / 2), -(dy / 2), dx, dy);
}

//int _test(int argc, const char* argv[]) {
//	printf("Original: | Modified: \n");
//	lyr = atoi(argv[1]);
//	printf("%i, %i, %s\n", argc, lyr, argv[1]);
//	modern();
//	for (int32_t y = 0; y < vy; y++) {
//		for (int32_t x = 0; x < vx; x++) {
//			int pix = mod_out[(y * dx) * (dy / vy) + (x * (dx / vx))];
//			uint8_t pixm = pix % 256;
//			printf("\x1b[7m\x1b[38;2;%i;%i;%im", biome_colors[pixm * 3], biome_colors[pixm * 3 + 1], biome_colors[pixm * 3 + 2]);
//			printf("%02X\x1b[0m", pixm);
//		}
//	}
//	printf("\x1b[0m");
//}